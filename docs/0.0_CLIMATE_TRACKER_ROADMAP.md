# Climate & Impact Global Tracker - Plan de ConstrucciÃ³n por Etapas

## ðŸ“‹ Resumen Ejecutivo

Un dashboard interactivo que visualiza datos climÃ¡ticos globales en tiempo real, combinando mapas 2D interactivos con visualizaciÃ³n 3D en ThreeJS. Dirigido a analistas financieros para entender riesgos climÃ¡ticos, datos ambientales y su impacto en seguros paramÃ©tricos.

**Objetivo de aprendizaje:** Dominar full-stack data visualization, real-time data streaming, geoespacial APIs, y performance optimization en aplicaciones complejas.

---

## ðŸ—ï¸ Arquitectura General

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      FRONTEND (React + TypeScript)              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Mapbox GL       â”‚  â”‚  ThreeJS Globe   â”‚  â”‚   Grafana    â”‚  â”‚
â”‚  â”‚  (2D Layers)     â”‚  â”‚  (3D Render)     â”‚  â”‚  (Embedded)  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                        WebSocket â”‚ HTTP                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚     â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   BACKEND (Node.js + Express)                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Socket.io (Real-time streaming)                         â”‚  â”‚
â”‚  â”‚  API Gateway (OpenWeatherMap, Mapbox, Copernicus)        â”‚  â”‚
â”‚  â”‚  Data Processing & Caching (Redis)                       â”‚  â”‚
â”‚  â”‚  Time-Series DB (InfluxDB / MongoDB)                     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              EXTERNAL APIs & DATA SOURCES                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â€¢ OpenWeatherMap (temperatura, precipitaciÃ³n, viento)         â”‚
â”‚  â€¢ Visual Crossing (histÃ³ricos climÃ¡ticos)                     â”‚
â”‚  â€¢ Mapbox (geocodificaciÃ³n, tiles, routing)                    â”‚
â”‚  â€¢ Copernicus (satÃ©lite ESA - humedad, vegetaciÃ³n, sequÃ­as)    â”‚
â”‚  â€¢ NOAA (datos abiertos USA)                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ðŸ“¦ Tech Stack por Componente

| Componente | TecnologÃ­a | PropÃ³sito |
|---|---|---|
| **Frontend Base** | React 19 + TypeScript + Vite | UI framework, type safety, build speed |
| **2D Maps** | Mapbox GL JS | Capas interactivas de clima, geocodificaciÃ³n |
| **3D Visualization** | ThreeJS + React Three Fiber | Globe 3D, partÃ­culas de viento, heatmaps |
| **State Management** | Zustand o Jotai | Estado global de cielo (mÃ¡s ligero que Redux) |
| **Real-time** | Socket.io + React Hooks | Streaming de datos en tiempo real |
| **Styling** | Tailwind CSS | UI rÃ¡pida y consistente |
| **Backend** | Node.js + Express | API REST, WebSocket server |
| **Time-Series DB** | InfluxDB o MongoDB | Almacenar histÃ³ricos de clima |
| **Cache** | Redis | Cachear respuestas de APIs externas |
| **Deployment** | Docker + Vercel/Railway | ContainerizaciÃ³n y hosting |

---

## ðŸŽ¯ Etapas de ConstrucciÃ³n

### **ETAPA 0: SETUP (1-2 dÃ­as)** âš™ï¸

**Objetivo:** Preparar la base del proyecto con todas las herramientas necesarias.

**Tareas:**
- [ ] Crear repositorio standalone: `climate-tracker`
- [ ] Setup Next.js o React + Vite
- [ ] Instalar dependencias base:
  - React + TypeScript
  - Mapbox GL JS
  - Three.js + React Three Fiber
  - Socket.io client
  - Axios + React Query
  - Tailwind CSS
  - Zustand (state management)
- [ ] Setup backend (Node.js + Express):
  - Express server
  - Socket.io
  - CORS configurado
  - Environment variables (.env)
- [ ] Crear estructura de carpetas:
  ```
  climate-tracker/
  â”œâ”€â”€ frontend/
  â”‚   â”œâ”€â”€ src/
  â”‚   â”‚   â”œâ”€â”€ components/
  â”‚   â”‚   â”œâ”€â”€ hooks/
  â”‚   â”‚   â”œâ”€â”€ services/
  â”‚   â”‚   â”œâ”€â”€ store/
  â”‚   â”‚   â””â”€â”€ pages/
  â”‚   â””â”€â”€ public/
  â”œâ”€â”€ backend/
  â”‚   â”œâ”€â”€ src/
  â”‚   â”‚   â”œâ”€â”€ routes/
  â”‚   â”‚   â”œâ”€â”€ services/
  â”‚   â”‚   â”œâ”€â”€ middleware/
  â”‚   â”‚   â””â”€â”€ config/
  â”‚   â””â”€â”€ .env.example
  â””â”€â”€ docker-compose.yml
  ```
- [ ] Setup Docker Compose (PostgreSQL, Redis, InfluxDB opcionales por ahora)
- [ ] Setup Git + GitHub

**Deliverables:**
- âœ… Proyecto corriendo en `localhost:3000` (frontend) + `localhost:5000` (backend)
- âœ… Estructura de carpetas limpia
- âœ… `.env.example` documentado

**Aprendizaje:**
- Estructura de full-stack projects
- ConfiguraciÃ³n de Vite vs Next.js (trade-offs)
- Environment management

---

### **ETAPA 1: Backend + APIs de Clima (3-4 dÃ­as)** ðŸŒ¡ï¸

**Objetivo:** Conectar con APIs de climate externas, validar datos, implementar caching.

**Tareas:**
- [ ] **OpenWeatherMap Integration:**
  - [ ] Registrarse en OpenWeatherMap (free tier)
  - [ ] Crear endpoint `GET /api/weather/:lat/:lon`
  - [ ] Parsear respuesta: temp, humidity, wind, precipitation
  - [ ] Validar inputs con Joi/Zod

- [ ] **Mapbox Geocoding:**
  - [ ] Registrarse en Mapbox
  - [ ] Crear endpoint `GET /api/geocode?query=Paris`
  - [ ] Retornar: lat, lon, feature name, country

- [ ] **Redis Caching:**
  - [ ] Cachear respuestas de OpenWeatherMap (TTL: 30min)
  - [ ] Cachear geocodificaciones (TTL: 24h)
  - [ ] Implementar invalidation logic

- [ ] **Error Handling & Logging:**
  - [ ] Winston logger setup
  - [ ] Try-catch en todos los endpoints
  - [ ] Graceful degradation si API externa falla

- [ ] **API Documentation:**
  - [ ] Swagger/OpenAPI setup
  - [ ] Documentar schemas de request/response

**Ejemplo de endpoint:**
```javascript
// GET /api/weather/:lat/:lon
// Response:
{
  "lat": 48.8566,
  "lon": 2.3522,
  "location": "Paris, France",
  "current": {
    "temp": 15.2,
    "humidity": 65,
    "wind_speed": 4.5,
    "wind_direction": 220,
    "cloud_cover": 45,
    "precipitation": 0
  },
  "forecast": [
    { "date": "2026-02-12", "temp_high": 16, "temp_low": 12, "rain_chance": 30 }
  ]
}
```

**Deliverables:**
- âœ… 3 endpoints funcionales (weather, geocode, combined)
- âœ… Redis caching operativo
- âœ… Swagger docs completa
- âœ… Manejo de errores robusto

**Aprendizaje:**
- CÃ³mo trabajar con APIs REST externas
- Caching strategy en backends data-heavy
- Rate limiting y retry logic
- ValidaciÃ³n de datos (Zod/Joi)
- Logging y debugging

---

### **ETAPA 2: Frontend Base + Mapbox (3-4 dÃ­as)** ðŸ—ºï¸

**Objetivo:** Crear interfaz base con mapa Mapbox interactivo, bÃºsqueda de ubicaciones.

**Tareas:**
- [ ] **Componentes Base:**
  - [ ] `Layout` (navbar, sidebar, main dashboard)
  - [ ] `MapContainer` (contenedor del mapa)
  - [ ] `SearchBar` (bÃºsqueda con autocomplete)
  - [ ] `DataPanel` (panel lateral con datos del clima)

- [ ] **Mapbox GL Integration:**
  - [ ] Inicializar mapa en Nueva York
  - [ ] Implementar zoom/pan/rotate controls
  - [ ] Marker en ubicaciÃ³n seleccionada
  - [ ] Sync bÃºsqueda â†’ mapa center

- [ ] **BÃºsqueda + GeocodificaciÃ³n:**
  - [ ] Debounced search (300ms)
  - [ ] Llamar al endpoint `/api/geocode`
  - [ ] Mostrar sugerencias en dropdown
  - [ ] Click en sugerencia â†’ mover mapa + fetch weather

- [ ] **Data Display:**
  - [ ] Mostrar temperatura actual
  - [ ] Mostrar humedad, viento, presiÃ³n
  - [ ] Mostrar forecast de 5 dÃ­as

- [ ] **State Management (Zustand):**
  - [ ] `selectedLocation` (lat, lon, name)
  - [ ] `weatherData` (current + forecast)
  - [ ] `loading` y `error` states

- [ ] **Styling:**
  - [ ] DiseÃ±o dark mode (adecuado para climate data)
  - [ ] Colores para temperaturas (gradiente azulâ†’rojo)
  - [ ] Responsive en mÃ³bil

**Componente ejemplo (SearchBar):**
```typescript
// components/SearchBar.tsx
import { useState, useCallback } from 'react';
import { useWeatherStore } from '@/store/weatherStore';

export const SearchBar = () => {
  const [query, setQuery] = useState('');
  const [suggestions, setSuggestions] = useState([]);
  const { setSelectedLocation, fetchWeather } = useWeatherStore();

  const handleSearch = useCallback(async (q: string) => {
    if (q.length < 2) return;
    
    // Debounce + call /api/geocode
    const response = await fetch(`/api/geocode?query=${q}`);
    const data = await response.json();
    setSuggestions(data);
  }, []);

  const handleSelect = (location: { lat: number; lon: number; name: string }) => {
    setSelectedLocation(location);
    fetchWeather(location.lat, location.lon);
    setQuery('');
    setSuggestions([]);
  };

  return (
    <div className="relative">
      <input
        type="text"
        value={query}
        onChange={(e) => {
          setQuery(e.target.value);
          handleSearch(e.target.value);
        }}
        placeholder="Search location..."
        className="w-full px-4 py-2 bg-gray-800 text-white rounded"
      />
      {suggestions.length > 0 && (
        <ul className="absolute top-full left-0 right-0 bg-gray-700 mt-1 rounded">
          {suggestions.map((s) => (
            <li
              key={`${s.lat}-${s.lon}`}
              onClick={() => handleSelect(s)}
              className="px-4 py-2 cursor-pointer hover:bg-gray-600"
            >
              {s.name}
            </li>
          ))}
        </ul>
      )}
    </div>
  );
};
```

**Deliverables:**
- âœ… Mapa visible con controles funcionales
- âœ… BÃºsqueda de ubicaciones integrada
- âœ… Datos de clima mostrÃ¡ndose al seleccionar
- âœ… Responsive design
- âœ… Dark mode aplicado

**Aprendizaje:**
- Mapbox GL JS API
- State management con Zustand
- Debouncing y optimizaciÃ³n de bÃºsquedas
- IntegraciÃ³n frontend-backend
- Responsive design patterns

---

### **ETAPA 3: Capas ClimÃ¡ticas en Mapbox (2-3 dÃ­as)** ðŸŒªï¸

**Objetivo:** AÃ±adir mÃºltiples capas de datos climÃ¡ticos al mapa (temperatura, precipitaciÃ³n, contaminaciÃ³n del aire).

**Tareas:**
- [ ] **Capas de Temperatura:**
  - [ ] Usar tileset de Mapbox con datos de temperatura
  - [ ] Implementar heatmap layer
  - [ ] Colormap: azul (frÃ­o) â†’ rojo (calor)
  - [ ] Toggle on/off

- [ ] **Capas de PrecipitaciÃ³n:**
  - [ ] Radar de lluvia con animaciÃ³n
  - [ ] Usar GeoJSON de forecast
  - [ ] Mostrar probabilidad en popup

- [ ] **Calidad del Aire (AQI):**
  - [ ] IntegraciÃ³n OpenAQ API (datos abiertos)
  - [ ] Puntos circulares con tamaÃ±o = AQI
  - [ ] Colores: verde (bueno) â†’ rojo (malo)

- [ ] **Layer Manager:**
  - [ ] Componente con checkboxes para layers
  - [ ] Show/hide layers dinÃ¡micamente
  - [ ] Guardar preferencias en localStorage

- [ ] **Leyendas:**
  - [ ] Mostrar escala de colores para cada layer
  - [ ] InformaciÃ³n de unidades (Â°C, mm, Âµg/mÂ³)

**Ejemplo de heatmap layer:**
```javascript
// En el componente de Mapbox
map.addLayer({
  id: 'temperature-heatmap',
  type: 'heatmap',
  source: 'temperature-data',
  paint: {
    'heatmap-weight': [
      'interpolate',
      ['linear'],
      ['get', 'temp'],
      0, 0,
      100, 1
    ],
    'heatmap-intensity': ['interpolate', ['linear'], ['zoom'], 0, 1, 9, 3],
    'heatmap-color': [
      'interpolate',
      ['linear'],
      ['heatmap-density'],
      0, 'rgba(0, 0, 255, 0)',
      0.25, 'rgb(0, 0, 255)',
      0.5, 'rgb(0, 255, 0)',
      0.75, 'rgb(255, 255, 0)',
      1, 'rgb(255, 0, 0)'
    ],
    'heatmap-radius': ['interpolate', ['linear'], ['zoom'], 0, 2, 9, 20],
    'heatmap-opacity': ['interpolate', ['linear'], ['zoom'], 7, 1, 9, 0.84]
  }
}, 'water');
```

**Deliverables:**
- âœ… Mapa con 3-4 capas de datos climÃ¡ticos
- âœ… Layer manager funcional
- âœ… Leyendas informativas
- âœ… Animaciones suaves

**Aprendizaje:**
- Mapbox layers y sources
- Heatmap visualization
- GeoJSON handling
- Performance optimization (layer caching)

---

### **ETAPA 4: VisualizaciÃ³n 3D con ThreeJS (4-5 dÃ­as)** ðŸŒ

**Objetivo:** Crear globo terrÃ¡queo 3D interactivo con visualizaciÃ³n de datos climÃ¡ticos.

**Tareas:**
- [ ] **Setup Three.js + React Three Fiber:**
  - [ ] Canvas component
  - [ ] OrbitControls (zoom, rotate, pan)
  - [ ] IluminaciÃ³n bÃ¡sica

- [ ] **Globe 3D:**
  - [ ] GeometrÃ­a esfera (IcosahedronGeometry)
  - [ ] Texture de mapa (equirectangular)
  - [ ] RotaciÃ³n automÃ¡tica lenta

- [ ] **Datos en Globe:**
  - [ ] Puntos de datos (sensores, ciudades) como partÃ­culas
  - [ ] Usar InstancedMesh para performance (10k+ puntos)
  - [ ] Color segÃºn temperatura/AQI
  - [ ] Click en punto â†’ ir al mapa 2D

- [ ] **Capas Visuales:**
  - [ ] LÃ­neas de latitud/longitud
  - [ ] Atmosfera (shader)
  - [ ] Brillo/glow effects

- [ ] **Animaciones:**
  - [ ] PartÃ­culas de viento (flow vectors)
  - [ ] Pulsaciones en puntos de interÃ©s
  - [ ] Transiciones suaves entre vistas

- [ ] **Tooltips 3D:**
  - [ ] Raycasting para detectar hover sobre puntos
  - [ ] Mostrar nombre + valores en tooltip

**Componente base (Globe):**
```typescript
// components/Globe.tsx
import { Canvas } from '@react-three/fiber';
import { OrbitControls, Sphere } from '@react-three/drei';
import { useRef, useMemo } from 'react';
import * as THREE from 'three';

export const Globe = ({ dataPoints }) => {
  const instancedMeshRef = useRef();
  
  // Convertir datos a posiciones 3D (lat/lon â†’ x,y,z en esfera)
  const positions = useMemo(() => {
    return dataPoints.map(point => {
      const lat = point.lat * Math.PI / 180;
      const lon = point.lon * Math.PI / 180;
      const x = Math.cos(lat) * Math.cos(lon);
      const y = Math.sin(lat);
      const z = Math.cos(lat) * Math.sin(lon);
      return new THREE.Vector3(x, y, z).multiplyScalar(1.01);
    });
  }, [dataPoints]);

  return (
    <Canvas>
      <ambientLight intensity={0.5} />
      <pointLight position={[10, 10, 10]} />
      
      {/* Globe */}
      <Sphere args={[1, 64, 64]}>
        <meshStandardMaterial map={new THREE.TextureLoader().load('/earth.jpg')} />
      </Sphere>

      {/* Data points */}
      <instancedMesh ref={instancedMeshRef} args={[new THREE.SphereGeometry(0.02), new THREE.MeshBasicMaterial(), dataPoints.length]}>
        {dataPoints.map((point, i) => (
          // Posicionar cada instancia
          null
        ))}
      </instancedMesh>

      <OrbitControls autoRotate autoRotateSpeed={2} />
    </Canvas>
  );
};
```

**Deliverables:**
- âœ… Globo 3D rotativo con texturas
- âœ… 10,000+ puntos de datos renderizÃ¡ndose sin lag
- âœ… Interactividad (zoom, rotate, click)
- âœ… Animaciones suaves de transiciÃ³n

**Aprendizaje:**
- Three.js fundamentals (geometries, materials, lights)
- React Three Fiber hooks
- InstancedMesh para performance
- Lat/Lon â†’ 3D coordinate conversion
- Raycasting y picking

---

### **ETAPA 5: Real-Time con WebSocket (2-3 dÃ­as)** âš¡

**Objetivo:** Streaming de datos en tiempo real usando Socket.io, actualizaciones live del mapa y globe.

**Tareas:**
- [ ] **Backend WebSocket:**
  - [ ] Emit de datos de clima cada 30 segundos
  - [ ] Emit de alertas climÃ¡ticas
  - [ ] Emit de predicciones actualizadas

- [ ] **Frontend Socket.io:**
  - [ ] Connect a servidor al montar App
  - [ ] Listeners para:
    - `weather:update` (nuevos datos)
    - `alert:new` (alertas de clima extremo)
    - `forecast:update` (pronÃ³sticos)
  - [ ] Actualizar Zustand store en tiempo real

- [ ] **Animaciones de ActualizaciÃ³n:**
  - [ ] Pulse en puntos que cambian
  - [ ] Toast notifications para alertas
  - [ ] Histograma de cambios Ãºltimas 24h

- [ ] **Performance:**
  - [ ] Batch updates (no actualizar cada dato individualmente)
  - [ ] Virtual scrolling para listas largas
  - [ ] Throttle updates a 1/sec mÃ¡ximo

**Ejemplo backend:**
```javascript
// backend/src/services/weatherSocket.ts
import { Server as SocketServer } from 'socket.io';

export class WeatherSocketService {
  constructor(private io: SocketServer) {}

  startBroadcasting() {
    setInterval(async () => {
      const weatherData = await this.fetchGlobalWeather();
      
      // Broadcast a todos los clientes conectados
      this.io.emit('weather:update', {
        timestamp: new Date(),
        data: weatherData,
      });
    }, 30000); // cada 30 segundos
  }

  broadcastAlert(alert: { location: string; severity: 'low' | 'medium' | 'high'; message: string }) {
    this.io.emit('alert:new', alert);
  }
}
```

**Deliverables:**
- âœ… Backend emitiendo datos cada 30s
- âœ… Frontend recibiendo y actualizando UI
- âœ… Alertas en tiempo real
- âœ… Performance optimization (batching, throttling)

**Aprendizaje:**
- Socket.io client/server
- Real-time data synchronization
- Performance considerations en streaming
- Fallback strategies (si WebSocket falla)

---

### **ETAPA 6: IntegraciÃ³n Avanzada + Grafana (3-4 dÃ­as)** ðŸ“Š

**Objetivo:** Agregar dashboards de Grafana, histÃ³ricos, alertas automÃ¡ticas, y predicciones.

**Tareas:**
- [ ] **InfluxDB Setup:**
  - [ ] Escribir datos de clima a InfluxDB
  - [ ] Bucketing por hora (agregaciÃ³n)
  - [ ] Retention policies (30 dÃ­as histÃ³rico)

- [ ] **Grafana Embed:**
  - [ ] Crear dashboards en Grafana
  - [ ] Embedir en iframe en nuestra app
  - [ ] Sincronizar filtros (ubicaciÃ³n) entre app y Grafana

- [ ] **Predicciones (Opcional):**
  - [ ] Usar ML model simple (TensorFlow.js)
  - [ ] Predecir temperatura para prÃ³ximas 48h
  - [ ] Mostrar en grÃ¡fico con intervalo de confianza

- [ ] **Alertas AutomÃ¡ticas:**
  - [ ] Definir umbrales (temp > 40Â°C, AQI > 300, viento > 100 km/h)
  - [ ] Enviar notificaciones (email, push, socket.io)
  - [ ] Guardar historial de alertas

- [ ] **Export Data:**
  - [ ] Exportar datos a CSV
  - [ ] Exportar reportes PDF
  - [ ] Compartir anÃ¡lisis por URL

**Deliverables:**
- âœ… HistÃ³ricos de clima (30 dÃ­as)
- âœ… Grafana embedded en Dashboard
- âœ… Alertas automÃ¡ticas funcionales
- âœ… Predicciones de 48h
- âœ… Export de datos

**Aprendizaje:**
- InfluxDB time-series queries
- Grafana API + embedding
- Machine learning bÃ¡sico (TensorFlow.js)
- Notifications architecture

---

### **ETAPA 7: Polish + Deployment (2-3 dÃ­as)** ðŸš€

**Objetivo:** OptimizaciÃ³n final, documentaciÃ³n, y deployment a producciÃ³n.

**Tareas:**
- [ ] **Performance Audit:**
  - [ ] Lighthouse scores > 90
  - [ ] Core Web Vitals (LCP, FID, CLS)
  - [ ] Bundle size < 500KB (gzipped)
  - [ ] Tree-shaking de Three.js

- [ ] **Testing:**
  - [ ] Unit tests (Jest)
  - [ ] Integration tests (Cypress)
  - [ ] E2E tests (Playwright)

- [ ] **Documentation:**
  - [ ] README completo
  - [ ] Setup guide (local + Docker)
  - [ ] API documentation
  - [ ] Architecture decision records (ADRs)

- [ ] **Deployment:**
  - [ ] Docker images (frontend + backend)
  - [ ] Docker Compose para stack completo
  - [ ] Deploy a Vercel (frontend) + Railway (backend)
  - [ ] CI/CD con GitHub Actions

- [ ] **Security:**
  - [ ] HTTPS/TLS
  - [ ] Rate limiting en APIs
  - [ ] Input validation y sanitization
  - [ ] CORS properly configured

- [ ] **Monitoring:**
  - [ ] Error tracking (Sentry)
  - [ ] Analytics (Segment)
  - [ ] Performance profiling (New Relic o similar)

**Deliverables:**
- âœ… App deployed en producciÃ³n
- âœ… DocumentaciÃ³n completa
- âœ… CI/CD pipeline
- âœ… Monitoring alerts configurados

**Aprendizaje:**
- DevOps fundamentals
- Performance optimization
- Security best practices
- Monitoring y observability

---

## ðŸ“… Timeline Estimado

| Etapa | DuraciÃ³n | Acumulado | Estado |
|-------|----------|-----------|--------|
| 0. Setup | 1-2 dÃ­as | 1-2 dÃ­as | â³ Not started |
| 1. Backend + APIs | 3-4 dÃ­as | 4-6 dÃ­as | â³ Not started |
| 2. Frontend Base + Mapbox | 3-4 dÃ­as | 7-10 dÃ­as | â³ Not started |
| 3. Capas ClimÃ¡ticas | 2-3 dÃ­as | 9-13 dÃ­as | â³ Not started |
| 4. ThreeJS Globe | 4-5 dÃ­as | 13-18 dÃ­as | â³ Not started |
| 5. Real-Time WebSocket | 2-3 dÃ­as | 15-21 dÃ­as | â³ Not started |
| 6. Grafana + Avanzado | 3-4 dÃ­as | 18-25 dÃ­as | â³ Not started |
| 7. Polish + Deploy | 2-3 dÃ­as | 20-28 dÃ­as | â³ Not started |
| **TOTAL** | **~4-5 semanas** | **20-28 dÃ­as** | |

**Ritmo recomendado:**
- Dedicar 4-6 horas diarias
- 5 dÃ­as por semana
- Totaliza ~4-5 semanas de desarrollo intenso

---

## ðŸŽ“ Matriz de Aprendizaje

```
TecnologÃ­a          â”‚ Etapa â”‚ Concepto Principal
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Node.js + Express   â”‚ 1     â”‚ Backend API design, caching
APIs Externas       â”‚ 1     â”‚ Request handling, error management
React + TypeScript  â”‚ 2     â”‚ Component architecture, hooks
Mapbox GL JS        â”‚ 2-3   â”‚ Web mapping, layer management
State Management    â”‚ 2     â”‚ Zustand, single source of truth
Three.js            â”‚ 4     â”‚ 3D graphics, performance (instancing)
React Three Fiber   â”‚ 4     â”‚ Declarative 3D in React
Socket.io           â”‚ 5     â”‚ Real-time communication
InfluxDB            â”‚ 6     â”‚ Time-series databases
Grafana             â”‚ 6     â”‚ Dashboarding, embedding
Docker              â”‚ 7     â”‚ Containerization
CI/CD               â”‚ 7     â”‚ GitHub Actions, deployment
```

---

## ðŸ”§ Comandos Iniciales

```bash
# Setup proyecto
mkdir climate-tracker && cd climate-tracker

# Frontend
npm create vite@latest frontend -- --template react-ts
cd frontend
npm install react-three-fiber three @react-three/drei
npm install mapbox-gl zustand axios socket.io-client
npm install -D tailwindcss postcss autoprefixer
npx tailwindcss init -p

# Backend
cd ..
mkdir backend && cd backend
npm init -y
npm install express socket.io cors dotenv axios redis
npm install -D typescript ts-node @types/node nodemon

# Docker
cat > docker-compose.yml << 'EOF'
version: '3.8'
services:
  redis:
    image: redis:7
    ports:
      - "6379:6379"
  
  influxdb:
    image: influxdb:2.7
    ports:
      - "8086:8086"
    environment:
      INFLUXDB_DB: climate_tracker
      INFLUXDB_ADMIN_USER: admin
      INFLUXDB_ADMIN_PASSWORD: admin123
    
  postgres:
    image: postgres:15
    ports:
      - "5432:5432"
    environment:
      POSTGRES_USER: user
      POSTGRES_PASSWORD: password
      POSTGRES_DB: climate_tracker
EOF

# Iniciar
docker-compose up -d
```

---

## ðŸ“š Recursos por Etapa

**Etapa 1 (Backend APIs):**
- OpenWeatherMap Docs: https://openweathermap.org/api
- Mapbox Geocoding: https://docs.mapbox.com/api/search/geocoding/
- Redis Caching: https://redis.io/docs/

**Etapa 2 (Frontend Mapbox):**
- Mapbox GL JS: https://docs.mapbox.com/mapbox-gl-js/
- Zustand: https://github.com/pmndrs/zustand
- React Query: https://tanstack.com/query/latest

**Etapa 4 (Three.js):**
- Three.js Docs: https://threejs.org/docs/
- React Three Fiber: https://docs.pmnd.rs/react-three-fiber/
- Instancing Guide: https://threejs.org/examples/?q=instanced

**Etapa 6 (InfluxDB + Grafana):**
- InfluxDB: https://docs.influxdata.com/
- Grafana: https://grafana.com/docs/
- Embedding: https://grafana.com/grafana/plugins/grafana-worldmap-panel/

---

## âœ… Checklist de Entregas

- [ ] **Etapa 0:** Proyecto base corriendo localmente
- [ ] **Etapa 1:** 3+ endpoints funcionales, Redis caching, Swagger docs
- [ ] **Etapa 2:** Mapa Mapbox con bÃºsqueda, data display en panel
- [ ] **Etapa 3:** 3-4 capas climÃ¡ticas, layer manager, leyendas
- [ ] **Etapa 4:** Globo 3D con 10k+ puntos sin lag, interactividad
- [ ] **Etapa 5:** WebSocket broadcast, actualizaciones en tiempo real
- [ ] **Etapa 6:** HistÃ³ricos en InfluxDB, Grafana embed, alertas
- [ ] **Etapa 7:** Deploy en producciÃ³n, CI/CD, documentaciÃ³n

---

## ðŸŽ¯ Hitos Clave para Portfolio

DespuÃ©s de cada etapa, tendrÃ¡s un componente standalone para tu portafolio:

1. **Post Etapa 2:** "Building Interactive Maps with React + Mapbox"
2. **Post Etapa 4:** "3D Data Visualization: 10k+ Points with Three.js + Performance Optimization"
3. **Post Etapa 5:** "Real-Time Data Streaming with Socket.io & React Hooks"
4. **Completo:** "Climate & Impact Global Tracker - Full Stack Data Visualization"

Cada uno es un **GitHub repository** con README bien documentado y live demo.

---

## ðŸš€ Next Steps

1. **Hoy/MaÃ±ana:** Completar Etapa 0 (setup)
2. **Esta semana:** Completar Etapas 1-2 (backend + frontend base)
3. **Semana 2:** Etapas 3-4 (capas climÃ¡ticas + 3D)
4. **Semana 3:** Etapas 5-6 (real-time + analytics)
5. **Semana 4:** Etapa 7 (deployment + polish)

Good luck! ðŸŒâœ¨
